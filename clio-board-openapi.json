{"openapi":"3.0.0","info":{"title":"CLIO-Board API","version":"1.0.0","description":"Personal task management system with AI agent integration","contact":{"name":"CLIO Board","url":"http://192.168.10.21:3000"}},"servers":[{"url":"http://192.168.10.21:3000","description":"Production server (Samwise)"},{"url":"http://localhost:3000","description":"Development server"}],"components":{"securitySchemes":{"AgentAuth":{"type":"apiKey","in":"header","name":"X-Agent-Key","description":"Agent authentication key for CLIO-Hermes-Agent"}},"schemas":{"Task":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"Task ID"},"routine_id":{"type":"string","format":"uuid","nullable":true,"description":"Associated routine ID (null for orphan tasks)"},"title":{"type":"string","maxLength":255,"description":"Task title"},"notes":{"type":"string","nullable":true,"description":"Free-form notes"},"type":{"type":"string","enum":["task","list"],"description":"AUTO-MANAGED: Converts based on items"},"status":{"type":"string","enum":["pending","completed","archived"],"description":"Task status"},"due_date":{"type":"string","format":"date","nullable":true,"description":"Due date (optional)"},"column_name":{"type":"string","enum":["today","tomorrow","this_week","horizon"],"description":"Kanban column"},"position":{"type":"integer","description":"Position within column"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}},"required":["title","column_name"]},"Routine":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"title":{"type":"string","maxLength":255,"description":"Routine name"},"description":{"type":"string","nullable":true},"color":{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$","description":"Hex color for UI"},"icon":{"type":"string","description":"Emoji icon"},"status":{"type":"string","enum":["active","paused","completed"]},"achievable":{"type":"boolean","description":"Can be marked complete"},"is_archived":{"type":"boolean","description":"Archive state (separate from operational status)"},"pause_until":{"type":"string","format":"date-time","nullable":true,"description":"When paused routine should resume"},"display_order":{"type":"integer","description":"Custom display order for drag-and-drop"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"},"archived_at":{"type":"string","format":"date-time","nullable":true}},"required":["title"]},"Note":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"Note ID"},"title":{"type":"string","nullable":true,"description":"Note title (optional)"},"content":{"type":"string","description":"Note content"},"type":{"type":"string","enum":["user","agent"],"description":"Note type (auto-detected from request source)"},"source":{"type":"string","enum":["manual","voice","conversation","claude_api"],"description":"How the note was created"},"column_position":{"type":"integer","minimum":1,"maximum":4,"nullable":true,"description":"Column position (1-2 user, 3-4 agent)"},"task_id":{"type":"string","format":"uuid","nullable":true,"description":"Associated task ID"},"routine_id":{"type":"string","format":"uuid","nullable":true,"description":"Associated routine ID"},"is_archived":{"type":"boolean","description":"Archive state"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"},"archived_at":{"type":"string","format":"date-time","nullable":true}},"required":["content"]},"Error":{"type":"object","properties":{"error":{"type":"string","description":"Error message"},"timestamp":{"type":"string","format":"date-time"}}},"Divider":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"Divider ID"},"column_name":{"type":"string","enum":["today"],"description":"Column where divider appears (currently only Today)"},"label_above":{"type":"string","description":"Label shown above the line (e.g., Morning)"},"label_below":{"type":"string","description":"Label shown below the line (e.g., Afternoon)"},"position":{"type":"integer","description":"Position for ordering alongside tasks"},"created_at":{"type":"string","format":"date-time"}}}}},"paths":{"/api/dividers":{"get":{"summary":"Get all column dividers","description":"Returns time-of-day dividers for the Today column. These are UI-only elements, not tasks.","tags":["Dividers"],"responses":{"200":{"description":"Array of dividers","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"column_name":{"type":"string","example":"today"},"label_above":{"type":"string","example":"Morning"},"label_below":{"type":"string","example":"Afternoon"},"position":{"type":"integer"}}}}}}}}}},"/api/dividers/{id}/move":{"put":{"summary":"Move a divider to a new position","description":"Updates the divider's position within the Today column","tags":["Dividers"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"Divider ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["position"],"properties":{"position":{"type":"integer","description":"New position for the divider"}}}}}},"responses":{"200":{"description":"Updated divider"},"404":{"description":"Divider not found"}}}},"/api/notes":{"get":{"summary":"Get all active notes","description":"Returns all notes that are not archived","tags":["Notes"],"parameters":[{"in":"query","name":"type","schema":{"type":"string","enum":["user","agent"]},"description":"Filter by note type"},{"in":"query","name":"column_position","schema":{"type":"integer","minimum":1,"maximum":4},"description":"Filter by column position (1-2 user, 3-4 agent)"}],"responses":{"200":{"description":"Array of notes","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"title":{"type":"string"},"content":{"type":"string"},"type":{"type":"string","enum":["user","agent"]},"source":{"type":"string","enum":["manual","voice","conversation","claude_api"]},"column_position":{"type":"integer"},"task_id":{"type":"string","format":"uuid"},"routine_id":{"type":"string","format":"uuid"},"created_at":{"type":"string","format":"date-time"}}}}}}}}},"post":{"summary":"Create a new note","description":"Creates a new note in the scratch area","tags":["Notes"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["content"],"properties":{"title":{"type":"string","description":"Note title (optional)"},"content":{"type":"string","description":"Note content"},"type":{"type":"string","enum":["user","agent"],"default":"user"},"source":{"type":"string","enum":["manual","voice","conversation","claude_api"],"default":"manual"},"column_position":{"type":"integer","minimum":1,"maximum":4,"description":"Column position (1-2 user, 3-4 agent)"},"task_id":{"type":"string","format":"uuid","description":"Associated task ID"},"routine_id":{"type":"string","format":"uuid","description":"Associated routine ID"}}}}}},"responses":{"201":{"description":"Created note"},"400":{"description":"Invalid input"}}}},"/api/notes/archived":{"get":{"summary":"Get all archived notes","description":"Returns all notes that have been archived","tags":["Notes"],"responses":{"200":{"description":"Array of archived notes"}}}},"/api/notes/{id}":{"get":{"summary":"Get a single note by ID","description":"Returns a note with associated task/routine info","tags":["Notes"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"Note ID"}],"responses":{"200":{"description":"Note object"},"404":{"description":"Note not found"}}},"put":{"summary":"Update a note","description":"Updates note content or position","tags":["Notes"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string"},"content":{"type":"string"},"column_position":{"type":"integer","minimum":1,"maximum":4}}}}}},"responses":{"200":{"description":"Updated note"},"404":{"description":"Note not found"}}}},"/api/notes/{id}/move":{"put":{"summary":"Move note to different column","description":"Moves a note to a different column in the scratch area","tags":["Notes"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["column"],"properties":{"column":{"type":"integer","minimum":1,"maximum":4,"description":"New column position"}}}}}},"responses":{"200":{"description":"Moved note"}}}},"/api/notes/{id}/convert":{"post":{"summary":"Convert note to task","description":"Converts a note to a task and archives the note","tags":["Notes"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string","description":"Task title (defaults to note title)"},"column_name":{"type":"string","enum":["today","tomorrow","this_week","horizon"],"default":"today"},"routine_id":{"type":"string","format":"uuid"},"due_date":{"type":"string","format":"date"}}}}}},"responses":{"201":{"description":"Created task and archived note"},"404":{"description":"Note not found"}}}},"/api/notes/{id}/archive":{"put":{"summary":"Archive a note","description":"Archives a note (soft delete)","tags":["Notes"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Archived note"},"404":{"description":"Note not found"}}}},"/api/notes/{id}/restore":{"put":{"summary":"Restore an archived note","description":"Restores an archived note back to active","tags":["Notes"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Restored note"},"404":{"description":"Note not found"}}}},"/api/routines":{"get":{"summary":"Get all active routines","description":"Returns all routines that are not archived with task counts","tags":["Routines"],"parameters":[{"in":"query","name":"status","schema":{"type":"string","enum":["active","paused","completed"]},"description":"Filter by status"}],"responses":{"200":{"description":"Array of routines","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Routine"}}}}}}},"post":{"summary":"Create a new routine","description":"Creates a new routine (project or recurring)","tags":["Routines"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["title"],"properties":{"title":{"type":"string","description":"Routine title"},"description":{"type":"string","description":"Routine description"},"color":{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$","description":"Hex color for UI","default":"#3498db"},"icon":{"type":"string","description":"Emoji icon","default":"ðŸ“Œ"},"achievable":{"type":"boolean","description":"Can be marked complete","default":false}}}}}},"responses":{"201":{"description":"Created routine"},"400":{"description":"Invalid input"}}}},"/api/routines/archived":{"get":{"summary":"Get all archived routines","description":"Returns all routines that have been archived, with task counts","tags":["Routines"],"responses":{"200":{"description":"Array of archived routines","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Routine"}}}}}}}},"/api/routines/{id}":{"get":{"summary":"Get a single routine by ID","description":"Returns a routine with task counts","tags":["Routines"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"Routine ID"}],"responses":{"200":{"description":"Routine object","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Routine"}}}},"404":{"description":"Routine not found"}}},"put":{"summary":"Update a routine","description":"Updates routine properties","tags":["Routines"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string"},"description":{"type":"string"},"color":{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$"},"icon":{"type":"string"},"achievable":{"type":"boolean"},"status":{"type":"string","enum":["active","paused","completed"]}}}}}},"responses":{"200":{"description":"Updated routine"},"404":{"description":"Routine not found"}}}},"/api/routines/{id}/tasks":{"get":{"summary":"Get all tasks for a routine","description":"Returns all tasks associated with a routine (mini-board view)","tags":["Routines"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"Routine ID"}],"responses":{"200":{"description":"Array of tasks","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Task"}}}}}}}},"/api/routines/reorder":{"put":{"summary":"Reorder routines","description":"Updates the display order of routines","tags":["Routines"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"order":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"order":{"type":"integer"}}}}}}}}},"responses":{"200":{"description":"Routines reordered successfully"}}}},"/api/routines/{id}/pause":{"put":{"summary":"Pause a routine","description":"Pauses a routine with optional resume date","tags":["Routines"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"pauseUntil":{"type":"string","format":"date-time","description":"When to resume the routine"}}}}}},"responses":{"200":{"description":"Paused routine"},"404":{"description":"Routine not found"}}}},"/api/routines/{id}/complete":{"put":{"summary":"Complete a routine","description":"Marks an achievable routine as complete","tags":["Routines"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Completed routine"},"400":{"description":"Routine is not achievable"},"404":{"description":"Routine not found"}}}},"/api/routines/{id}/archive":{"put":{"summary":"Archive a routine","description":"Archives a routine","tags":["Routines"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Archived routine"},"404":{"description":"Routine not found"}}}},"/api/routines/{id}/restore":{"put":{"summary":"Restore an archived routine","description":"Restores an archived routine back to active status","tags":["Routines"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Restored routine"},"404":{"description":"Routine not found"}}}},"/api/tasks":{"get":{"summary":"Get all active tasks","description":"Returns all tasks that are not archived, with their list items if applicable","tags":["Tasks"],"parameters":[{"in":"query","name":"column","schema":{"type":"string","enum":["today","tomorrow","this_week","horizon"]},"description":"Filter by column"},{"in":"query","name":"routine_id","schema":{"type":"string","format":"uuid"},"description":"Filter by routine"}],"responses":{"200":{"description":"Array of tasks","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Task"}}}}}}},"post":{"summary":"Create a new task","description":"Creates a new task (always starts as type='task')","tags":["Tasks"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["title"],"properties":{"title":{"type":"string","description":"Task title"},"notes":{"type":"string","description":"Task notes"},"routine_id":{"type":"string","format":"uuid","description":"Associated routine ID"},"column_name":{"type":"string","enum":["today","tomorrow","this_week","horizon"],"default":"today"},"due_date":{"type":"string","format":"date"}}}}}},"responses":{"201":{"description":"Created task"},"400":{"description":"Invalid input"}}}},"/api/tasks/archived":{"get":{"summary":"Get all archived tasks","description":"Returns all tasks that have been archived, with their list items if applicable","tags":["Tasks"],"parameters":[{"in":"query","name":"column","schema":{"type":"string","enum":["today","tomorrow","this_week","horizon"]},"description":"Filter by column"},{"in":"query","name":"routine_id","schema":{"type":"string","format":"uuid"},"description":"Filter by routine"}],"responses":{"200":{"description":"Array of archived tasks"}}}},"/api/tasks/{id}":{"get":{"summary":"Get a single task by ID","description":"Returns a task with its list items if applicable","tags":["Tasks"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"Task ID"}],"responses":{"200":{"description":"Task object","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"404":{"description":"Task not found"}}},"put":{"summary":"Update a task","description":"Updates task properties (title, notes, column, etc.)","tags":["Tasks"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string"},"notes":{"type":"string"},"routine_id":{"type":"string","format":"uuid"},"column_name":{"type":"string","enum":["today","tomorrow","this_week","horizon"]},"position":{"type":"integer"},"due_date":{"type":"string","format":"date"}}}}}},"responses":{"200":{"description":"Updated task"},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/move":{"put":{"summary":"Move task to different column","description":"Moves a task to a different column and/or position","tags":["Tasks"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["column"],"properties":{"column":{"type":"string","enum":["today","tomorrow","this_week","horizon"]},"position":{"type":"integer"}}}}}},"responses":{"200":{"description":"Moved task"}}}},"/api/tasks/{id}/archive":{"put":{"summary":"Archive a task","description":"Archives a task (preserves list items if type='list')","tags":["Tasks"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Archived task"},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/restore":{"put":{"summary":"Restore a task from archive","description":"Restores an archived task back to active status","tags":["Tasks"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Restored task"},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/complete":{"post":{"summary":"Mark task as complete","description":"Marks a task as complete and archives it","tags":["Tasks"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Completed task"},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/items":{"get":{"summary":"Get items for a task","description":"Returns all list items for a task (if type='list')","tags":["List Items"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Array of list items"}}},"post":{"summary":"Add item to task","description":"Adds an item to a task (auto-converts task to list if needed)","tags":["List Items"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["title"],"properties":{"title":{"type":"string","description":"Item text"}}}}}},"responses":{"201":{"description":"Created item"},"400":{"description":"Invalid input"}}}},"/api/tasks/{id}/items/{itemId}":{"put":{"summary":"Update list item","description":"Updates a list item (check/uncheck or edit title)","tags":["List Items"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}},{"in":"path","name":"itemId","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string"},"completed":{"type":"boolean"}}}}}},"responses":{"200":{"description":"Updated item"}}},"delete":{"summary":"Delete list item","description":"Deletes an item (auto-converts list to task if last item)","tags":["List Items"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"}},{"in":"path","name":"itemId","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Item deleted"},"404":{"description":"Item not found"}}}},"/health":{"get":{"summary":"Health check endpoint","description":"Returns server health status and database connectivity","tags":["System"],"responses":{"200":{"description":"Service is healthy","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"healthy"},"timestamp":{"type":"string","format":"date-time"},"version":{"type":"string","example":"1.0.0"},"database":{"type":"object","properties":{"connected":{"type":"boolean","example":true},"timestamp":{"type":"string","format":"date-time"}}},"uptime":{"type":"number","description":"Server uptime in seconds"}}}}}},"503":{"description":"Service is unhealthy","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api":{"get":{"summary":"API information endpoint","description":"Returns API metadata and authentication status","tags":["System"],"security":[{"AgentAuth":[]}],"responses":{"200":{"description":"API information","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"CLIO-Board API"},"version":{"type":"string","example":"1.0.0"},"timestamp":{"type":"string","format":"date-time"},"actor":{"type":"string","enum":["user","agent"],"example":"user"},"isAgent":{"type":"boolean","example":false}}}}}}}}}},"tags":[]}